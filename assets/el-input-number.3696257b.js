import{a$ as Y,g as se,aa as b,aX as Z,b0 as k,b1 as I,aW as T,d as J,af as oe,h as ie,B as ce,H as de,v as h,aN as S,O as me,N as pe,b2 as be,o as v,c as M,as as G,u as t,n as z,aZ as A,b as K,w as H,j as P,b3 as fe,b4 as ve,E as W,l as j,b5 as Ne,b6 as Ve,ak as O,q as he,aA as Ie,b7 as q,s as ye}from"./index.19b5dd49.js";import{E as Ee}from"./el-input.5bb81e16.js";import{u as ge,b as _e,c as we,a as Se}from"./index.d58422e6.js";const Ae=100,Pe=600,X={beforeMount(r,N){const o=N.value,{interval:a=Ae,delay:y=Pe}=Y(o)?{}:o;let i,m;const u=()=>Y(o)?o():o.handler(),p=()=>{m&&(clearTimeout(m),m=void 0),i&&(clearInterval(i),i=void 0)};r.addEventListener("mousedown",E=>{E.button===0&&(p(),u(),document.addEventListener("mouseup",()=>p(),{once:!0}),m=setTimeout(()=>{i=setInterval(()=>{u()},a)},y))})}},ke=se({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ge,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||b(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)},validateEvent:{type:Boolean,default:!0}}),Te={[Z]:(r,N)=>r!==N,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[k]:r=>b(r)||I(r),[T]:r=>b(r)||I(r)},Fe=["aria-label","onKeydown"],Be=["aria-label","onKeydown"],Ce=J({name:"ElInputNumber"}),xe=J({...Ce,props:ke,emits:Te,setup(r,{expose:N,emit:o}){const a=r,{t:y}=oe(),i=ie("input-number"),m=ce(),u=de({currentValue:a.modelValue,userInput:null}),{formItem:p}=_e(),E=h(()=>b(a.modelValue)&&g(a.modelValue,-1)<a.min),L=h(()=>b(a.modelValue)&&g(a.modelValue)>a.max),Q=h(()=>{const e=U(a.step);return S(a.precision)?Math.max(U(a.modelValue),e):(e>a.precision,a.precision)}),F=h(()=>a.controls&&a.controlsPosition==="right"),R=we(),V=Se(),ee=h(()=>{if(u.userInput!==null)return u.userInput;let e=u.currentValue;if(I(e))return"";if(b(e)){if(Number.isNaN(e))return"";S(a.precision)||(e=e.toFixed(a.precision))}return e}),B=(e,n)=>{if(S(n)&&(n=Q.value),n===0)return Math.round(e);let l=String(e);const s=l.indexOf(".");if(s===-1||!l.replace(".","").split("")[s+n])return e;const _=l.length;return l.charAt(_-1)==="5"&&(l=`${l.slice(0,Math.max(0,_-1))}6`),Number.parseFloat(Number(l).toFixed(n))},U=e=>{if(I(e))return 0;const n=e.toString(),l=n.indexOf(".");let s=0;return l!==-1&&(s=n.length-l-1),s},g=(e,n=1)=>b(e)?B(e+a.step*n):u.currentValue,C=()=>{if(a.readonly||V.value||L.value)return;const e=a.modelValue||0,n=g(e);D(n),o(k,u.currentValue)},x=()=>{if(a.readonly||V.value||E.value)return;const e=a.modelValue||0,n=g(e,-1);D(n),o(k,u.currentValue)},$=(e,n)=>{const{max:l,min:s,step:c,precision:f,stepStrictly:_,valueOnClear:w}=a;let d=Number(e);if(I(e)||Number.isNaN(d))return null;if(e===""){if(w===null)return null;d=Ie(w)?{min:s,max:l}[w]:w}return _&&(d=B(Math.round(d/c)*c,f)),S(f)||(d=B(d,f)),(d>l||d<s)&&(d=d>l?l:s,n&&o(T,d)),d},D=e=>{var n;const l=u.currentValue,s=$(e);l!==s&&(u.userInput=null,o(T,s),o(Z,s,l),a.validateEvent&&((n=p==null?void 0:p.validate)==null||n.call(p,"change").catch(c=>q())),u.currentValue=s)},ne=e=>{u.userInput=e,o(k,e===""?null:Number(e))},te=e=>{const n=e!==""?Number(e):"";(b(n)&&!Number.isNaN(n)||e==="")&&D(n),u.userInput=null},ae=()=>{var e,n;(n=(e=m.value)==null?void 0:e.focus)==null||n.call(e)},re=()=>{var e,n;(n=(e=m.value)==null?void 0:e.blur)==null||n.call(e)},le=e=>{o("focus",e)},ue=e=>{var n;o("blur",e),a.validateEvent&&((n=p==null?void 0:p.validate)==null||n.call(p,"blur").catch(l=>q()))};return me(()=>a.modelValue,e=>{u.currentValue=$(e,!0),u.userInput=null},{immediate:!0}),pe(()=>{var e;const{min:n,max:l,modelValue:s}=a,c=(e=m.value)==null?void 0:e.input;if(c.setAttribute("role","spinbutton"),Number.isFinite(l)?c.setAttribute("aria-valuemax",String(l)):c.removeAttribute("aria-valuemax"),Number.isFinite(n)?c.setAttribute("aria-valuemin",String(n)):c.removeAttribute("aria-valuemin"),c.setAttribute("aria-valuenow",String(u.currentValue)),c.setAttribute("aria-disabled",String(V.value)),!b(s)&&s!=null){let f=Number(s);Number.isNaN(f)&&(f=null),o(T,f)}}),be(()=>{var e;const n=(e=m.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${u.currentValue}`)}),N({focus:ae,blur:re}),(e,n)=>(v(),M("div",{class:z([t(i).b(),t(i).m(t(R)),t(i).is("disabled",t(V)),t(i).is("without-controls",!e.controls),t(i).is("controls-right",t(F))]),onDragstart:n[0]||(n[0]=O(()=>{},["prevent"]))},[e.controls?G((v(),M("span",{key:0,role:"button","aria-label":t(y)("el.inputNumber.decrease"),class:z([t(i).e("decrease"),t(i).is("disabled",t(E))]),onKeydown:A(x,["enter"])},[K(t(W),null,{default:H(()=>[t(F)?(v(),P(t(fe),{key:0})):(v(),P(t(ve),{key:1}))]),_:1})],42,Fe)),[[t(X),x]]):j("v-if",!0),e.controls?G((v(),M("span",{key:1,role:"button","aria-label":t(y)("el.inputNumber.increase"),class:z([t(i).e("increase"),t(i).is("disabled",t(L))]),onKeydown:A(C,["enter"])},[K(t(W),null,{default:H(()=>[t(F)?(v(),P(t(Ne),{key:0})):(v(),P(t(Ve),{key:1}))]),_:1})],42,Be)),[[t(X),C]]):j("v-if",!0),K(t(Ee),{id:e.id,ref_key:"input",ref:m,type:"number",step:e.step,"model-value":t(ee),placeholder:e.placeholder,readonly:e.readonly,disabled:t(V),size:t(R),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[A(O(C,["prevent"]),["up"]),A(O(x,["prevent"]),["down"])],onBlur:ue,onFocus:le,onInput:ne,onChange:te},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var De=he(xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Oe=ye(De);export{Oe as E};

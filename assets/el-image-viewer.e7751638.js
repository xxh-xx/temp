var ke=Object.defineProperty,ze=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var fe=(o,s,t)=>s in o?ke(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t,X=(o,s)=>{for(var t in s||(s={}))Ie.call(s,t)&&fe(o,t,s[t]);if(de)for(var t of de(s))Le.call(s,t)&&fe(o,t,s[t]);return o},J=(o,s)=>ze(o,xe(s));import{S as Ce,U as R,a as C,V as A,o as d,c as h,h as u,b as me,d as re,W as pe,X as ve,Y as he,u as ge,Z as Ee,s as _,$ as Oe,x as k,v as we,y as le,B as _e,A as $e,m as ie,q as f,p as b,n as p,e as n,I as Se,g as V,J as S,a0 as Ve,K as Te,F as ce,a1 as Ae,l as Me,G as Ne,H as Be,i as ue,r as Q,T as Re,a2 as He,_ as ye,a3 as B,a4 as H,w as be,a5 as De,a6 as Fe,a7 as Ye,a8 as Xe,L as Pe,a9 as We,t as je,aa as Ze}from"./index.f76098b0.js";import{d as qe}from"./debounce.b0c8b542.js";var Ge="Expected a function";function oe(o,s,t){var l=!0,v=!0;if(typeof o!="function")throw new TypeError(Ge);return Ce(t)&&(l="leading"in t?!!t.leading:l,v="trailing"in t?!!t.trailing:v),qe(o,s,{leading:l,maxWait:s,trailing:v})}const Ke=(o,s)=>{if(!R||!o||!s)return!1;const t=o.getBoundingClientRect();let l;return s instanceof Element?l=s.getBoundingClientRect():l={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<l.bottom&&t.bottom>l.top&&t.right>l.left&&t.left<l.right},Ue=C({name:"ArrowLeft"}),Je={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Qe=u("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),et=[Qe];function tt(o,s,t,l,v,m){return d(),h("svg",Je,et)}var nt=A(Ue,[["render",tt]]);const at=C({name:"FullScreen"}),st={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ot=u("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),rt=[ot];function lt(o,s,t,l,v,m){return d(),h("svg",st,rt)}var it=A(at,[["render",lt]]);const ct=C({name:"RefreshLeft"}),ut={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},dt=u("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),ft=[dt];function vt(o,s,t,l,v,m){return d(),h("svg",ut,ft)}var mt=A(ct,[["render",vt]]);const pt=C({name:"RefreshRight"}),ht={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},gt=u("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),wt=[gt];function _t(o,s,t,l,v,m){return d(),h("svg",ht,wt)}var $t=A(pt,[["render",_t]]);const yt=C({name:"ScaleToOriginal"}),bt={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},kt=u("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),zt=[kt];function xt(o,s,t,l,v,m){return d(),h("svg",bt,zt)}var It=A(yt,[["render",xt]]);const Lt=C({name:"ZoomIn"}),Ct={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Et=u("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1),Ot=[Et];function St(o,s,t,l,v,m){return d(),h("svg",Ct,Ot)}var Vt=A(Lt,[["render",St]]);const Tt=C({name:"ZoomOut"}),At={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Mt=u("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),Nt=[Mt];function Bt(o,s,t,l,v,m){return d(),h("svg",At,Nt)}var Rt=A(Tt,[["render",Bt]]);const Ht=()=>R&&/firefox/i.test(window.navigator.userAgent),Dt=me({urlList:{type:re(Array),default:()=>pe([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),Ft={close:()=>!0,switch:o=>typeof o=="number"},Yt=["src"],Xt={name:"ElImageViewer"},Pt=C(J(X({},Xt),{props:Dt,emits:Ft,setup(o,{emit:s}){const t=o,l={CONTAIN:{name:"contain",icon:ve(it)},ORIGINAL:{name:"original",icon:ve(It)}},v=Ht()?"DOMMouseScroll":"mousewheel",{t:m}=he(),c=ge("image-viewer"),{nextZIndex:ee}=Ee(),z=_(),E=_([]),P=Oe(),O=_(!0),g=_(t.initialIndex),x=_(l.CONTAIN),i=_({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),D=k(()=>{const{urlList:e}=t;return e.length<=1}),M=k(()=>g.value===0),W=k(()=>g.value===t.urlList.length-1),te=k(()=>t.urlList[g.value]),F=k(()=>{const{scale:e,deg:a,offsetX:r,offsetY:w,enableTransition:I}=i.value;let $=r/e,L=w/e;switch(a%360){case 90:case-270:[$,L]=[L,-$];break;case 180:case-180:[$,L]=[-$,-L];break;case 270:case-90:[$,L]=[-L,$];break}const N={transform:`scale(${e}) rotate(${a}deg) translate(${$}px, ${L}px)`,transition:I?"transform .3s":""};return x.value.name===l.CONTAIN.name&&(N.maxWidth=N.maxHeight="100%"),N}),ne=k(()=>we(t.zIndex)?t.zIndex:ee());function T(){se(),s("close")}function ae(){const e=oe(r=>{switch(r.code){case B.esc:t.closeOnPressEscape&&T();break;case B.space:G();break;case B.left:K();break;case B.up:y("zoomIn");break;case B.right:U();break;case B.down:y("zoomOut");break}}),a=oe(r=>{(r.wheelDelta?r.wheelDelta:-r.detail)>0?y("zoomIn",{zoomRate:1.2,enableTransition:!1}):y("zoomOut",{zoomRate:1.2,enableTransition:!1})});P.run(()=>{H(document,"keydown",e),H(document,v,a)})}function se(){P.stop()}function j(){O.value=!1}function Z(e){O.value=!1,e.target.alt=m("el.image.error")}function q(e){if(O.value||e.button!==0||!z.value)return;i.value.enableTransition=!1;const{offsetX:a,offsetY:r}=i.value,w=e.pageX,I=e.pageY,$=oe(N=>{i.value=J(X({},i.value),{offsetX:a+N.pageX-w,offsetY:r+N.pageY-I})}),L=H(document,"mousemove",$);H(document,"mouseup",()=>{L()}),e.preventDefault()}function Y(){i.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function G(){if(O.value)return;const e=Object.keys(l),a=Object.values(l),r=x.value.name,I=(a.findIndex($=>$.name===r)+1)%e.length;x.value=l[e[I]],Y()}function K(){if(M.value&&!t.infinite)return;const e=t.urlList.length;g.value=(g.value-1+e)%e}function U(){if(W.value&&!t.infinite)return;const e=t.urlList.length;g.value=(g.value+1)%e}function y(e,a={}){if(O.value)return;const{zoomRate:r,rotateDeg:w,enableTransition:I}=X({zoomRate:1.4,rotateDeg:90,enableTransition:!0},a);switch(e){case"zoomOut":i.value.scale>.2&&(i.value.scale=Number.parseFloat((i.value.scale/r).toFixed(3)));break;case"zoomIn":i.value.scale<7&&(i.value.scale=Number.parseFloat((i.value.scale*r).toFixed(3)));break;case"clockwise":i.value.deg+=w;break;case"anticlockwise":i.value.deg-=w;break}i.value.enableTransition=I}return le(te,()=>{_e(()=>{const e=E.value[0];e!=null&&e.complete||(O.value=!0)})}),le(g,e=>{Y(),s("switch",e)}),$e(()=>{var e,a;ae(),(a=(e=z.value)==null?void 0:e.focus)==null||a.call(e)}),(e,a)=>(d(),ie(He,{to:"body",disabled:!e.teleported},[f(Re,{name:"viewer-fade",appear:""},{default:b(()=>[u("div",{ref_key:"wrapper",ref:z,tabindex:-1,class:p(n(c).e("wrapper")),style:ue({zIndex:n(ne)})},[u("div",{class:p(n(c).e("mask")),onClick:a[0]||(a[0]=Se(r=>e.hideOnClickModal&&T(),["self"]))},null,2),V(" CLOSE "),u("span",{class:p([n(c).e("btn"),n(c).e("close")]),onClick:T},[f(n(S),null,{default:b(()=>[f(n(Ve))]),_:1})],2),V(" ARROW "),n(D)?V("v-if",!0):(d(),h(ce,{key:0},[u("span",{class:p([n(c).e("btn"),n(c).e("prev"),n(c).is("disabled",!e.infinite&&n(M))]),onClick:K},[f(n(S),null,{default:b(()=>[f(n(nt))]),_:1})],2),u("span",{class:p([n(c).e("btn"),n(c).e("next"),n(c).is("disabled",!e.infinite&&n(W))]),onClick:U},[f(n(S),null,{default:b(()=>[f(n(Te))]),_:1})],2)],64)),V(" ACTIONS "),u("div",{class:p([n(c).e("btn"),n(c).e("actions")])},[u("div",{class:p(n(c).e("actions__inner"))},[f(n(S),{onClick:a[1]||(a[1]=r=>y("zoomOut"))},{default:b(()=>[f(n(Rt))]),_:1}),f(n(S),{onClick:a[2]||(a[2]=r=>y("zoomIn"))},{default:b(()=>[f(n(Vt))]),_:1}),u("i",{class:p(n(c).e("actions__divider"))},null,2),f(n(S),{onClick:G},{default:b(()=>[(d(),ie(Ae(x.value.icon)))]),_:1}),u("i",{class:p(n(c).e("actions__divider"))},null,2),f(n(S),{onClick:a[3]||(a[3]=r=>y("anticlockwise"))},{default:b(()=>[f(n(mt))]),_:1}),f(n(S),{onClick:a[4]||(a[4]=r=>y("clockwise"))},{default:b(()=>[f(n($t))]),_:1})],2)],2),V(" CANVAS "),u("div",{class:p(n(c).e("canvas"))},[(d(!0),h(ce,null,Me(e.urlList,(r,w)=>Ne((d(),h("img",{ref_for:!0,ref:I=>E.value[w]=I,key:r,src:r,style:ue(n(F)),class:p(n(c).e("img")),onLoad:j,onError:Z,onMousedown:q},null,46,Yt)),[[Be,w===g.value]])),128))],2),Q(e.$slots,"default")],6)]),_:3})],8,["disabled"]))}}));var Wt=ye(Pt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const jt=be(Wt),Zt=me({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:re([String,Object])},previewSrcList:{type:re(Array),default:()=>pe([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}}),qt={error:o=>o instanceof Event,switch:o=>we(o),close:()=>!0},Gt=["src"],Kt={key:0},Ut={name:"ElImage",inheritAttrs:!1},Jt=C(J(X({},Ut),{props:Zt,emits:qt,setup(o,{emit:s}){const t=o;let l="";const{t:v}=he(),m=ge("image"),c=De(),ee=Fe(),z=_(!1),E=_(!0),P=_(0),O=_(0),g=_(!1),x=_(),i=_();let D,M;const W=k(()=>c.style),te=k(()=>{const{fit:e}=t;return R&&e?{objectFit:e}:{}}),F=k(()=>{const{previewSrcList:e}=t;return Array.isArray(e)&&e.length>0}),ne=k(()=>{const{previewSrcList:e,initialIndex:a}=t;let r=a;return a>e.length-1&&(r=0),r}),T=()=>{if(!R)return;E.value=!0,z.value=!1;const e=new Image,a=t.src;e.addEventListener("load",r=>{a===t.src&&ae(r,e)}),e.addEventListener("error",r=>{a===t.src&&se(r)}),Object.entries(c).forEach(([r,w])=>{r.toLowerCase()!=="onload"&&e.setAttribute(r,w)}),e.src=a};function ae(e,a){P.value=a.width,O.value=a.height,E.value=!1,z.value=!1}function se(e){E.value=!1,z.value=!0,s("error",e)}function j(){Ke(x.value,i.value)&&(T(),Y())}const Z=Ze(j,200);async function q(){var e;if(!R)return;await _e();const{scrollContainer:a}=t;Xe(a)?i.value=a:Pe(a)&&a!==""?i.value=(e=document.querySelector(a))!=null?e:void 0:x.value&&(i.value=We(x.value)),i.value&&(D=H(i,"scroll",Z),setTimeout(()=>j(),100))}function Y(){!R||!i.value||!Z||(D==null||D(),i.value=void 0)}function G(e){if(!!e.ctrlKey){if(e.deltaY<0)return e.preventDefault(),!1;if(e.deltaY>0)return e.preventDefault(),!1}}function K(){!F.value||(M=H("wheel",G,{passive:!1}),l=document.body.style.overflow,document.body.style.overflow="hidden",g.value=!0)}function U(){M==null||M(),document.body.style.overflow=l,g.value=!1,s("close")}function y(e){s("switch",e)}return le(()=>t.src,()=>{t.lazy?(E.value=!0,z.value=!1,Y(),q()):T()}),$e(()=>{t.lazy?q():T()}),(e,a)=>(d(),h("div",{ref_key:"container",ref:x,class:p([n(m).b(),e.$attrs.class]),style:ue(n(W))},[E.value?Q(e.$slots,"placeholder",{key:0},()=>[u("div",{class:p(n(m).e("placeholder"))},null,2)]):z.value?Q(e.$slots,"error",{key:1},()=>[u("div",{class:p(n(m).e("error"))},je(n(v)("el.image.error")),3)]):(d(),h("img",Ye({key:2},n(ee),{src:e.src,style:n(te),class:[n(m).e("inner"),n(F)?n(m).e("preview"):""],onClick:K}),null,16,Gt)),n(F)?(d(),h(ce,{key:3},[g.value?(d(),ie(n(jt),{key:0,"z-index":e.zIndex,"initial-index":n(ne),infinite:e.infinite,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:U,onSwitch:y},{default:b(()=>[e.$slots.viewer?(d(),h("div",Kt,[Q(e.$slots,"viewer")])):V("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):V("v-if",!0)],2112)):V("v-if",!0)],6))}}));var Qt=ye(Jt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const an=be(Qt);export{an as E,nt as a,oe as t,Vt as z};
